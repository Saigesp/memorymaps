<!DOCTYPE html lang="es-ES" >
<html>

    <head>
        <title>Mapas de la Memoria</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

        <meta property="og:title" content="" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="" />
        <meta property="og:image" content="" />
        <meta property="og:description" content="" />
        <meta property="og:site_name" content="" />
        <meta property="og:locale" content="es_ES" />
        <meta property="article:publisher" content="">
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:title" content="" />
        <meta name="twitter:site" content="" />
        <meta name="twitter:creator" content="" />

        <!-- styles -->
        <link rel="stylesheet" href="assets/css/style.css">

        <!-- schema.org markup for Google+ -->
        <meta itemprop="name" content="" >
        <meta itemprop="description" content="">
        <meta itemprop="image" content="">

        <!-- Twitter Card -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="">
        <meta name="twitter:title" content="">
        <meta name="twitter:description" content="">
        <meta name="twitter:creator" content="">
        <meta name="twitter:image:src" content="">

        <!-- Open Graph -->
        <meta property="og:title" content="">
        <meta property="og:type" content="website" />
        <meta property="og:image" content="" />
        <meta property="og:description" content="" />
        <meta property="og:site_name" content="" />

        <!-- favicon -->
        <!--
        <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
        <link rel="manifest" href="assets/favicon/site.webmanifest">
        <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="theme-color" content="#ffffff">
        -->
    </head>

    <body>        
        <div id="app" class="main">
            <div class="overmap">
                <aside class="sidebar left" :class="{active: sidebaropen == 'left'}">
                    <div class="sidebar-wrap">
                        ola
                    </div>
                </aside>
                <aside class="sidebar right" :class="{active: sidebaropen == 'right'}">
                    <div class="sidebar-wrap">
                        adios
                    </div>
                </aside>
                
                <div class="overmask" :class="{active: sidebaropen}" @click="sidebaropen = ''"></div>

                <nav class="content left">
                    <div class="menu" @click="sidebaropen = 'left'">Proyecto</div>
                </nav>
                <nav class="content right">
                    <div class="menu" @click="sidebaropen = 'right'">menu</div>
                </nav>

            </div>
            <d3vuemap-points :lat="lat" :lng="lng" :zoom="zoom"></d3vuemap-points>
        </div>
    </body>

    <!-- scripts -->
    <script src="assets/js/bundle.js"></script>
    <script src="assets/js/d3.map.js"></script>
    <script src="assets/js/d3.map.points.js"></script>
    <script src="assets/js/vue.map.points.js"></script>
    <script src="assets/js/app.js"></script>
    <script type="text/javascript">
    const EventBus = new Vue();

    var app = new Vue({
        el: '#app',
        data: {
            lat: getQueryStringParam('lat') ? getQueryStringParam('lat') : 40.428655,
            lng: getQueryStringParam('lng') ? getQueryStringParam('lng') : -3.6622,
            zoom: getQueryStringParam('zoom') ? getQueryStringParam('zoom') : 12,
            sidebaropen: '',
        },
        created: function(){
            var self = this;
            EventBus.$on('map_move', (data)=>{
                self.lat = data.lat;
                self.lng = data.lng;
                self.zoom = data.zoom;
            });
        },
        watch: {
            lat: function(val) { updateQueryStringParam('lat', val); },
            lng: function(val) { updateQueryStringParam('lng', val); },
            zoom: function(val){ updateQueryStringParam('zoom', val); },
        }
    });
        
    </script>
    <!-- end scripts -->

</html>